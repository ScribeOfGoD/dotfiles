#!/usr/bin/env bash
DOTFILES=$HOME/.dotfiles

echo "--------------------------------------------------------------------------------------------------"
echo "Installing dotfiles"
echo "--------------------------------------------------------------------------------------------------"

# --------------------------------------------------------------------------------------------------
# Install required dependencies
# --------------------------------------------------------------------------------------------------

sudo apt install zsh git php nodejs ack-grep

# --------------------------------------------------------------------------------------------------
# Clone dotfiles repository
# --------------------------------------------------------------------------------------------------

if [ -d $HOME/.dotfiles ]; then
	git -C $DOTFILES pull
else
	git clone https://github.com/pxgamer/dotfiles.git $DOTFILES
fi

# --------------------------------------------------------------------------------------------------
# Install additional binaries
# --------------------------------------------------------------------------------------------------

source  $DOTFILES/install/link.sh
source  $DOTFILES/install/composer.sh
source  $DOTFILES/install/zplug.sh
source  $DOTFILES/install/libsecret.sh

# --------------------------------------------------------------------------------------------------
# Cleanup
# --------------------------------------------------------------------------------------------------

rm -f $HOME/.zcompdump*

sudo apt autoremove

# --------------------------------------------------------------------------------------------------
# Enable ZSH
# --------------------------------------------------------------------------------------------------

echo "Configuring zsh as default shell"
sudo chsh -s $(which zsh)
